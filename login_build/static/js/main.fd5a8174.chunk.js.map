{"version":3,"sources":["index.js"],"names":["ReactGA","initialize","pageview","App","props","_this","Object","_Users_filip_login_page_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_filip_login_page_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_filip_login_page_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","open","onSignIn","bind","_Users_filip_login_page_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","onClose","googleUser","console","log","profile","getBasicProfile","xhr","XMLHttpRequest","withCredentials","setRequestHeader","send","JSON","stringify","name","getName","email","getEmail","profile_id","getId","hd","getHostedDomain","self","onreadystatechange","readyState","DONE","status","setState","window","location","reload","gapi","auth2","getAuthInstance","disconnect","args","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","style","paddingTop","react_google_login__WEBPACK_IMPORTED_MODULE_10__","classname","clientId","onSuccess","onFailure","onFailedSignIn","theme","_material_ui_core__WEBPACK_IMPORTED_MODULE_9__","aria-labelledby","aria-describedby","id","onClick","color","React","Component","ReactDOM","render","document","getElementById"],"mappings":"6PAMAA,IAAQC,WAAW,kBACnBD,IAAQE,SAAS,mBAEXC,cACL,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CAACC,MAAM,GACpBR,EAAKS,SAAWT,EAAKS,SAASC,KAAdT,OAAAU,EAAA,EAAAV,QAAAU,EAAA,EAAAV,CAAAD,KAChBA,EAAKY,QAAUZ,EAAKY,QAAQF,KAAbT,OAAAU,EAAA,EAAAV,QAAAU,EAAA,EAAAV,CAAAD,KAJGA,wEAOVa,GACRC,QAAQC,IAAI,mBACZ,IAAIC,EAAUH,EAAWI,kBACrBC,EAAM,IAAIC,eACdD,EAAIE,iBAAkB,EACtBF,EAAIV,KAAK,OAAQ,2CAA2C,GAC5DU,EAAIG,iBAAiB,eAAgB,oBACrCH,EAAII,KAAKC,KAAKC,UAAU,CACvBC,KAAMT,EAAQU,UACdC,MAAOX,EAAQY,WACfC,WAAYb,EAAQc,QACpBC,GAAIlB,EAAWmB,qBAGhB,IAAIC,EAAO9B,KACXe,EAAIgB,mBAAqB,WACpBhB,EAAIiB,aAAehB,eAAeiB,OACnB,KAAdlB,EAAImB,OACPJ,EAAKK,SAAS,CAAC9B,MAAM,IAGrB+B,OAAOC,SAASC,QAAO,KAKdF,OAAOG,KAAKC,MAAMC,kBACxBC,oDAGQC,GACdhC,QAAQC,IAAI,0DAIZZ,KAAKmC,SAAS,CAAC9B,MAAM,qCAIrB,OACCuC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACdH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAaC,MAAO,CAACC,WAAY,SAAhD,sBACAL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAf,gCACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACdH,EAAAC,EAAAC,cAACI,EAAA,YAAD,CAAaC,UAAU,eAAeC,SAAS,2EAA2EC,UAAWrD,KAAKM,SAAUgD,UAAWtD,KAAKuD,eAAgBC,MAAM,SAC3LZ,EAAAC,EAAAC,cAACW,EAAA,EAAD,CACMpD,KAAML,KAAKI,MAAMC,KACtBI,QAAST,KAAKS,QACTiD,kBAAgB,qBAChBC,mBAAiB,4BAEjBf,EAAAC,EAAAC,cAACW,EAAA,EAAD,CAAaG,GAAG,sBAAhB,0FACNhB,EAAAC,EAAAC,cAACW,EAAA,EAAD,KACQb,EAAAC,EAAAC,cAACW,EAAA,EAAD,CAAQI,QAAS7D,KAAKS,QAASqD,MAAM,WAArC,iBA7DMC,IAAMC,WAwExBC,IAASC,OAAOtB,EAAAC,EAAAC,cAACnD,EAAD,MAAQwE,SAASC,eAAe","file":"static/js/main.fd5a8174.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Dialog, DialogTitle, DialogActions, Button } from '@material-ui/core';\nimport { GoogleLogin } from 'react-google-login';\nimport ReactGA from 'react-ga';\nReactGA.initialize('UA-137697306-1');\nReactGA.pageview('/login-page');\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {open: false};\n\t\tthis.onSignIn = this.onSignIn.bind(this);\n\t\tthis.onClose = this.onClose.bind(this);\n\t}\n\n\tonSignIn(googleUser) {\n\t\tconsole.log(\"User signed in.\");\n\t\tlet profile = googleUser.getBasicProfile();\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.withCredentials = true;\n\t\txhr.open(\"POST\", \"http://battleforcharity.com/create-user\", true);\n\t\txhr.setRequestHeader('Content-Type', 'application/json');\n\t\txhr.send(JSON.stringify({\n\t\t\tname: profile.getName(),\n\t\t\temail: profile.getEmail(),\n\t\t\tprofile_id: profile.getId(),\n\t\t\thd: googleUser.getHostedDomain()\n\t\t}));\n\n\t\tlet self = this\n\t\txhr.onreadystatechange = function() {\n\t\t\tif (xhr.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tif (xhr.status == 403) {\n\t\t\t\t\tself.setState({open: true});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\twindow.location.reload(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar auth2 = window.gapi.auth2.getAuthInstance();\n\t\tauth2.disconnect();\n\t}\n\n\tonFailedSignIn(args) {\n\t\tconsole.log(\"Google login failed.\");\n\t}\n\n\tonClose() {\n\t\tthis.setState({open: false});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"everything\">\n\t\t\t\t<div className=\"loginTitle\" style={{paddingTop: \"30px\"}}>Battle For Charity</div>\n\t\t\t\t<div className=\"description\">Sign in to make your bracket</div>\n\t\t\t\t<div className=\"googleButton\">\n\t\t\t\t\t<GoogleLogin classname=\"googleButton\" clientId=\"360968735809-85smlnpttakq9ql1ij9mmijibc3q24dq.apps.googleusercontent.com\" onSuccess={this.onSignIn} onFailure={this.onFailedSignIn} theme=\"dark\"/>\n\t\t\t\t<Dialog\n          open={this.state.open}\n\t\t\t\t\tonClose={this.onClose}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">Please sign in using your school email ending with \"@students.d211.org\" or \"@d211.org\"</DialogTitle>\n\t\t\t\t<DialogActions>\n            <Button onClick={this.onClose} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}